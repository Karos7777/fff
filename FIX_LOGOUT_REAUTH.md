# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è "–æ–±—ã—á–Ω—ã–º" –±–µ–∑ ID.

## üéØ –ü—Ä–∏—á–∏–Ω–∞

–§—É–Ω–∫—Ü–∏—è `handleLogout()` –æ—á–∏—â–∞–ª–∞ localStorage –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –Ω–æ **–Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** —á–µ—Ä–µ–∑ Telegram Web App API.

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞

```javascript
// –ë—ã–ª–æ:
function handleLogout() {
    localStorage.removeItem('authToken');
    localStorage.removeItem('currentUser');
    currentUser = null;
    showAuthSection();  // ‚ùå –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
}

// –°—Ç–∞–ª–æ:
function handleLogout() {
    console.log('üö™ [LOGOUT] –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
    
    // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    localStorage.removeItem('authToken');
    localStorage.removeItem('currentUser');
    currentUser = null;
    window.currentUser = null;
    products = [];
    orders = [];
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    showAuthSection();
    
    // ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram
    console.log('üîÑ [LOGOUT] –ó–∞–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...');
    setTimeout(() => {
        autoAuth();  // ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram
    }, 500);
}
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–í—ã–π—Ç–∏"

```
üö™ [LOGOUT] –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
```

### 2. –û—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ

- ‚úÖ –£–¥–∞–ª—è–µ—Ç—Å—è `authToken`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç—Å—è `currentUser`
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è `products` –∏ `orders`

### 3. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
üîÑ [LOGOUT] –ó–∞–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
üîê [AUTH] ========== –ù–ê–ß–ê–õ–û –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==========
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ initDataUnsafe: { id: 123456789, ... }
‚úÖ [AUTH] –ê–≤—Ç–æ—Ä–∏–∑—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
```

### 4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–æ–≤–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

- ‚úÖ Telegram ID –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ê–¥–º–∏–Ω –ø—Ä–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å

```bash
git add .
git commit -m "Fix re-authentication after logout v2.2.5"
git push
```

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–º–∏—Ç–µ "–í—ã–π—Ç–∏"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
   ```
   üö™ [LOGOUT] –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
   üîÑ [LOGOUT] –ó–∞–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
   üîê [AUTH] ========== –ù–ê–ß–ê–õ–û –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==========
   ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ initDataUnsafe
   ‚úÖ [AUTH] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
   ```

4. –í—ã –¥–æ–ª–∂–Ω—ã —Å–Ω–æ–≤–∞ —É–≤–∏–¥–µ—Ç—å:
   - ‚úÖ –í–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –ö–Ω–æ–ø–∫—É "–ú–æ–∏ –∑–∞–∫–∞–∑—ã"
   - ‚úÖ –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∏ (–µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω)

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Telegram ID –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ Web App API
- ‚úÖ –ê–¥–º–∏–Ω –ø—Ä–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ç–µ—Ä—è–µ—Ç —Å–≤–æ–π ID
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

## üìä –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—Ö–æ–¥–∏—Ç

```
1. –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–π—Ç–∏"
2. –í–∏–¥–∏—Ç —ç–∫—Ä–∞–Ω "–ó–∞–≥—Ä—É–∑–∫–∞..."
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è —Å–Ω–æ–≤–∞
4. –í–∏–¥–∏—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–¥–º–∏–Ω –≤—ã—Ö–æ–¥–∏—Ç

```
1. –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–π—Ç–∏"
2. –í–∏–¥–∏—Ç —ç–∫—Ä–∞–Ω "–ó–∞–≥—Ä—É–∑–∫–∞..."
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è —Å–Ω–æ–≤–∞
4. –í–∏–¥–∏—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ + –∞–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∏
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í—ã—Ö–æ–¥ –≤–Ω–µ Telegram

```
1. –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–π—Ç–∏"
2. –í–∏–¥–∏—Ç —ç–∫—Ä–∞–Ω "–ó–∞–≥—Ä—É–∑–∫–∞..."
3. –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (ID: 853232715)
4. –í–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
```

## üêõ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
üö™ [LOGOUT] –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
üîÑ [LOGOUT] –ó–∞–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
```

–ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç - –æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram Web App

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ initDataUnsafe
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ –≤ Telegram.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
ADMIN_TELEGRAM_IDS = 853232715,–í–ê–®_ID
```

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ó–∞–¥–µ—Ä–∂–∫–∞ 500ms

–ó–∞–¥–µ—Ä–∂–∫–∞ –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã:
- ‚úÖ –£—Å–ø–µ–ª –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã—Ö–æ–¥
- ‚úÖ Telegram Web App —É—Å–ø–µ–ª –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

### –û—á–∏—Å—Ç–∫–∞ window.currentUser

–¢–µ–ø–µ—Ä—å –æ—á–∏—â–∞–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ `currentUser`, –Ω–æ –∏ `window.currentUser`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏.

---

**–í–µ—Ä—Å–∏—è:** 2.2.5  
**–î–∞—Ç–∞:** 03.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
