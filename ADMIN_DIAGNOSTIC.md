# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å—é

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1Ô∏è‚É£ **–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ADMIN_TELEGRAM_IDS**

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Railway:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `ADMIN_TELEGRAM_IDS`

#### –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
ADMIN_TELEGRAM_IDS=–í–ê–®_TELEGRAM_ID
```

–ò–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:
```
ADMIN_TELEGRAM_IDS=853232715,123456789,987654321
```

---

### 2Ô∏è‚É£ **–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID**

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@userinfobot` –∏–ª–∏ `@getmyid_bot`
3. –ù–∞–∂–º–∏—Ç–µ `/start`
4. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞–º –≤–∞—à ID

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
   ```
   üë§ [AUTH] Telegram User ID: 123456789
   ```

---

### 3Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
console.log('currentUser:', currentUser);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
console.log('is_admin:', currentUser?.is_admin);
console.log('isAdmin:', currentUser?.isAdmin);
console.log('role:', currentUser?.role);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram ID
console.log('telegram_id:', currentUser?.telegram_id);
```

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∞–¥–º–∏–Ω–∞:
```javascript
{
  id: 1,
  telegram_id: "–í–ê–®_ID",
  username: "username",
  is_admin: true,     // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
  isAdmin: true,      // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
  role: "admin"       // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "admin"
}
```

#### –ï—Å–ª–∏ `is_admin: false`:
- –í–∞—à ID –Ω–µ –≤ —Å–ø–∏—Å–∫–µ `ADMIN_TELEGRAM_IDS` –Ω–∞ Railway
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—à ID –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

---

### 4Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞**

–í –ª–æ–≥–∞—Ö Railway –∏—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:

#### –ü—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```
üë§ [SERVER AUTH] –ó–∞–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram
üë§ [SERVER AUTH] –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: { id: '–í–ê–®_ID', ... }
üîê [AUTH] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω –ø—Ä–∞–≤: {
  userId: '–í–ê–®_ID',
  adminIds: ['853232715', ...],
  isAdmin: true  // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
}
```

#### –ï—Å–ª–∏ `isAdmin: false`:
–ó–Ω–∞—á–∏—Ç –≤–∞—à ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –Ω–∏ —Å –æ–¥–Ω–∏–º –≤ `adminIds` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Railway Variables.

---

### 5Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É"**

–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úÖ [USER INFO] –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞ (is_admin: true)
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
‚ÑπÔ∏è [USER INFO] –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞ (is_admin: false)
```

–ó–Ω–∞—á–∏—Ç —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–º–µ—Ç–∏–ª –≤–∞—Å –∫–∞–∫ –∞–¥–º–∏–Ω–∞.

---

### 6Ô∏è‚É£ **–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**

–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–æ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   localStorage.clear();
   location.reload();
   ```
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ Telegram

---

### 7Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∫–∞ middleware**

–ï—Å–ª–∏ –∞–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 403:

```
POST /api/admin/products ‚Üí 403 Forbidden
{
  "error": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞",
  "telegram_id": "–í–ê–®_ID",
  "admin_ids": ["853232715"]
}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∞—à `telegram_id` –Ω–µ –≤ —Å–ø–∏—Å–∫–µ `admin_ids`.

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à `telegram_id` –∏–∑ –æ—à–∏–±–∫–∏
2. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `ADMIN_TELEGRAM_IDS` –Ω–∞ Railway:
   ```
   ADMIN_TELEGRAM_IDS=853232715,–í–ê–®_ID
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
console.log('telegram_id:', currentUser?.telegram_id);
console.log('is_admin:', currentUser?.is_admin);
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway Variables
- `ADMIN_TELEGRAM_IDS` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞—à Telegram ID

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 4: –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ
```javascript
localStorage.clear();
location.reload();
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –ó–Ω–∞—é —Å–≤–æ–π Telegram ID
- [ ] –î–æ–±–∞–≤–∏–ª —Å–≤–æ–π ID –≤ `ADMIN_TELEGRAM_IDS` –Ω–∞ Railway
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –û—á–∏—Å—Ç–∏–ª localStorage –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª—Å—è –∑–∞–Ω–æ–≤–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `currentUser.is_admin` –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Railway

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - –í–µ—Å—å –≤—ã–≤–æ–¥ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ó–Ω–∞—á–µ–Ω–∏–µ `currentUser`
   - –í–∞—à `telegram_id`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Railway:
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `üîê [AUTH] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω –ø—Ä–∞–≤`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è `userId`, `adminIds`, `isAdmin`

–° —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É.
